$(document).ready(function(){$(".dash-wrapper").hundredYardDash(),$(".tooltip").toolTip()}),$.fn.extend({hundredYardDash:function(e){var S={settings:"",shuffles:0,teamsDefault:12,rangeDefault:"1,10,2,7,Normal",defaultImg:"images/sprites/player.png",totalDashWidth:100,place:1,finalPlaceOrder:[],replayRecord:[],replayMode:!1,dashing:!1,dashOver:!1,codeDash:!1,imgOn:!1,code:[],turn:[]};e=$.extend(S,e);return this.each(function(e){var l=function(){if(-1<window.location.href.indexOf("?")){var e,t=[],n=window.location.href.split("?")[1];"w"===n[0]&&(n=function(e){for(var t="",n=decodeURIComponent(e),i=0;i<n.length;i++)t+=String.fromCharCode(n.charCodeAt(i)-3);return t}(n));for(var i=n.slice(n.indexOf("?")+1).split("&"),s=0;s<i.length;s++)e=i[s].split("="),t.push(e[0]),t[e[0]]=e[1];return t}},t=function(){$(".p-hold").html("").animate({opacity:0},200,function(){for(var e=0,t=100/S.settings.teams;e<=S.settings.teams-1;){void 0!==S.settings.player[e]&&null!==S.settings.player[e]||(S.settings.player[e]={name:""});var n='<div class="p-container" style="height:'+t+'%;"><div class="p-bar-outside"><div class="p-bar player'+e+'" data-player="'+e+'" style="background-image:url(\'images/sprites/player.png\');"><div class="p-name p-name'+e+'"></div></div></div><div class="p-place-container"><div class="p-place"></div></div></div>';$(".p-hold").append(n),e++}S.settings.player.length>S.settings.teams&&S.settings.player.splice(S.settings.teams)}).animate({opacity:0},100,function(){i(),u(),o()}).animate({opacity:1},500)},n=function(e){if(e){var n=[6,8,10,12,14,16,18,20];$.each($(".select-number"),function(e,t){-1===$.inArray(parseInt($(this).text()),n)&&$(this).addClass("hidden")})}else $(".select-number").removeClass("hidden"),$(".teamswitch-option").removeClass("selected"),$(".teamswitch-on").addClass("selected")},i=function(){var n=$(".p-bar").css("height"),e=$(".field-start").css("width");parseInt(n)>parseInt(e)&&(n=e),$(function(){if($(".p-bar").css("width",n),!S.dashing){var e=$(".field-start").width(),t=e/$(".p-container").width()*($(".p-bar").width()/e)*100;S.dashOver||$(".p-bar").css("left",-t+"%")}})},s=function(){$.each(S.settings.player,function(e,t){$(".team"+(e+1)).val(t.name)})},a=function(){$.each($(".input-img"),function(t,e){$(this).on("change",function(){var e=$(this).val();e=e.replace(/^https?\:\/\//i,""),$(this).val(e),S.settings.player[t].img=e,r()})})},o=function(){S.imgOn?($(".input-img-wrapper").show(),$(".imgswitch-option").removeClass("selected"),$(".imgswitch-on").addClass("selected")):($(".input-img-wrapper").hide(),$(".imgswitch-option").removeClass("selected"),$(".imgswitch-off").addClass("selected")),r()},r=function(){var s=[];$.each($(".p-bar"),function(n,e){var t=S.settings.player[n].img;if(S.imgOn)if(""===t||null==t||"undefined"===t){i=S.defaultImg;p(i,n)}else if(d(t))t.startsWith("https://")||t.startsWith("http://")||(t="//"+t),c(t).then(function(e){(s[n]=e,s[n])&&p(t,n)},function(e){var t=S.defaultImg;p(t,n)});else{i=S.defaultImg;p(i,n)}else{var i=S.defaultImg;p(i,n)}})},d=function(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)},c=function(a,o){return new Promise(function(e,t){var n,i=o||5e3,s=new Image;s.onerror=s.onabort=function(){clearTimeout(n),t(!1)},s.onload=function(){clearTimeout(n),e(!0)},n=setTimeout(function(){s.src="//!!!!/test.jpg",t(!1)},i),s.src=a})},p=function(e,t){$(".player"+t).css({"background-image":"url('"+e+"')"}),$(".playerimg"+t).val(S.settings.player[t].img)},u=function(){$.each(S.settings.player,function(e,t){$(".p-name"+e).text(S.settings.player[e].name)})},f=function(){S.codeDash?($(".range-toggle").addClass("unavailable"),$(".range-toggle").find(".range-num").addClass("unavailable")):($(".range-toggle").removeClass("unavailable"),$(".range-toggle").find(".range-num").removeClass("unavailable"))},h=function(){$(".teamsinput-container").html("");for(var e=1;e<=S.settings.teams;){var t='<div class="input-container"><input class="input-team team'+e+'" placeholder="'+e+'" /><div class="input-img-wrapper"><i class="material-icons mi-rarr">subdirectory_arrow_right</i><input class="input-img playerimg'+(e-1)+'" placeholder="direct img link" /></div></div>';$(".teamsinput-container").append(t),e++}$.each($(".input-team"),function(t,e){$(this).on("change",function(){var e=$(this).val();$(".p-name"+t).text(e),S.settings.player[t].name=e,m()})})},g=function(){$(".code-container").html("");for(var e=1;e<=S.settings.teams;){var t='<div class="code-line"><div class="code-player-name c-name'+(e-1)+'"></div><input type="text" class="input-code code'+(e-1)+'" /></div>';$(".code-container").append(t),e++,m(),$.each($(".input-code"),function(t,e){$(this).on("change",function(){var e=(e=(e=$(this).val()).replace(/\s/g,"")).substring(0,20);S.settings.player[t].code=e})})}},m=function(){$.each(S.settings.player,function(e,t){$(".c-name"+e).text(t.name),$(".code"+e).val(t.code)})},v=function(){S.codeDash&&$.each($(".input-code"),function(e,t){if(""===$(this).val()){var n=x();$(this).val(n),S.settings.player[e].code=n}}),m()},x=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<15;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},b=function(){S.shuffles++,$(".total-shuffles").text(S.shuffles);for(var e,t,n=S.settings.player,i=n.length;0!==i;)t=Math.floor(Math.random()*i),e=n[i-=1],n[i]=n[t],n[t]=e;S.settings.player=n,u(),m(),s(),r()},y=function(){var n=[],e=window.location.href.split("?")[0];$.each(S.settings.player,function(e,t){n.push(encodeURIComponent(t.name))});var t="t="+S.settings.teams;if(t+="&n="+n.join(","),t+="&s="+S.settings.range.minY+","+S.settings.range.maxY+","+S.settings.range.minS+","+S.settings.range.maxS+","+S.settings.range.speed,S.imgOn){var i=[];$.each(S.settings.player,function(e,t){i.push(encodeURIComponent(t.img))}),t+="&i="+i.join(",")}if(S.codeDash){var s=[];$.each(S.settings.player,function(e,t){s.push(encodeURIComponent(t.code))}),t+="&c="+s.join(",")}return t=e+"?"+t},C=function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"};String.prototype.hexEncode=function(){var e,t="";for(e=0;e<this.length;e++)t+=this[e].charCodeAt(0);return t};var w,W,I,k,O,H,D,R=function(e){S.dashing=!0;var u=parseInt(S.settings.range.minY),f=parseInt(S.settings.range.maxY)+1-parseInt(S.settings.range.minY),h=1e3*parseInt(S.settings.range.minS),g=1e3*(parseInt(S.settings.range.maxS)-parseInt(S.settings.range.minS)),m=S.settings.range.speed;$.each(e,function(e,t){var s=$(this),a=!1,o=s.find(".p-bar").data("player"),n=s.width(),i=s.find(".p-bar").css("left");i=parseFloat(i);if(currentPercent=i/n*100,S.replayMode){void 0!==S.turn[o]&&null!==S.turn[o]||(S.turn[o]=0);var r=parseInt(S.settings.replay[o].yards[S.turn[o]]),d=parseInt(S.settings.replay[o].time[S.turn[o]]);S.turn[o]++;var c=S.settings.replay[o].yards.length;S.turn[o]>c&&s.find(".p-bar").css({left:S.totalDashWidth+"%"})}else{if(S.codeDash){void 0!==S.turn[o]&&null!==S.turn[o]||(S.turn[o]=0,S.code[o]=S.settings.player[o].code);var l=function(e){null!=e&&""!==e||(e=(e="blank").toString()),e.length<=4&&(e=e+e+e+e+e);var t=(t=(t=(t=e.hexEncode()).replace(/\D/g,"")).replace(/[0]/g,"")).match(/.{5}/g),s=[],a=[];return $.each(t,function(e,t){var n=t.substring(0,1),i=t.substring(1);s[e]=n,a[e]=i}),{yards:s,time:a}}(S.code[o]);void 0!==l.yards[S.turn[o]]&&null!==l.yards[S.turn[o]]||(S.code[o]=function(e){for(var t="",n=encodeURIComponent(e).split("").reverse().join(""),i=0;i<n.length;i++)t+=String.fromCharCode(n.charCodeAt(i)+1);return t+=e}(S.code[o]),S.turn[o]=0);r=parseInt(l.yards[S.turn[o]]),d=parseInt(l.time[S.turn[o]]);S.turn[o]++}else r=randomNum=Math.floor(Math.random()*f)+u,d=Math.floor(Math.random()*g)+h;void 0===S.replayRecord[o]&&(S.replayRecord[o]={yards:"",time:"",place:""}),S.replayRecord[o].yards+=r+",",S.replayRecord[o].time+=d+","}"Fast"===m&&(r*=2),"Faster"===m&&(r*=2,d/=2),"Fastest"===m&&(r*=3,d/=3);var p=currentPercent+r;s.find(".p-bar").animate({left:p+"%"},{duration:d,easing:"swing",progress:function(){cW=s.width(),bW=s.find(".p-bar").css("left"),bW=parseFloat(bW),cP=bW/cW*100,cP>=S.totalDashWidth&&(a=!0,s.find(".p-bar").stop(!1,!0))},complete:function(){var e,t,n,i;a?(s.find(".p-bar").css({left:S.totalDashWidth+"%"}),S.replayMode?S.place=S.settings.replay[o].place:(S.replayRecord[o].place=S.place,S.replayRecord[o].yards=S.replayRecord[o].yards.slice(0,-1),S.replayRecord[o].time=S.replayRecord[o].time.slice(0,-1)),S.finalPlaceOrder[S.place-1]={place:S.place,name:S.settings.player[o].name},s.find(".p-place").text(C(S.place)),"1"==S.place?s.find(".p-place").addClass("gold"):"2"==S.place?s.find(".p-place").addClass("silver"):"3"==S.place?s.find(".p-place").addClass("bronze"):s.find(".p-place").addClass("black-outline"),S.finalPlaceOrder.length==S.settings.teams?(S.dashing=!1,S.dashOver=!0,i=S.finalPlaceOrder,$.each(i,function(e,t){var n='<div class="place-order"><div class="place-number">'+C(t.place)+'</div><div class="place-name">'+t.name+"</div></div>";$(".placements").append(n)}),$(".settings-replay").val((e=y(),t=$.now(),n=[],$.each(S.replayRecord,function(e,t){n[e]=t.place+":"+t.yards+":"+t.time}),e+"&d="+t+"&r="+(n=n.join("^")))),$(".settings-box").delay(500).fadeIn(500),$(".settings-share").show()):S.place++):R(s)}})})};S.settings=function(){var e=l();void 0===e&&(e=[]);var t=e.t||e.teams||S.teamsDefault,n={minY:(n=(n=e.s||e.range||S.rangeDefault).split(","))[0],maxY:n[1],minS:n[2],maxS:n[3],speed:n[4]},i=e.d||e.date,s=e.r||e.replay,a=e.n||e.names||"",o=e.c||e.code||void 0,r=e.i||e.img||void 0,d=(a=a.split(","),[]),c=[];$.each(a,function(e,t){d.push({name:decodeURIComponent(t),code:"",img:""})}),void 0!==s&&(S.replayMode=!0,s=s.split("^"),$.each(s,function(e,t){var n=t.split(":"),i=n[1].split(","),s=n[2].split(",");c[e]={place:n[0],yards:i,time:s}}),i=(i=new Date(parseInt(i))).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"}));void 0!==o&&(S.codeDash=!0,o=o.split(","),$.each(o,function(e,t){d[e].code=decodeURIComponent(t)}),f());void 0!==r?(S.imgOn=!0,r=r.split(","),$.each(r,function(e,t){d[e].img=decodeURIComponent(t)})):S.imgOn=!1;return{teams:t,player:d,range:n,date:i,replay:c}}(),t(),$(".settings-box").fadeIn(500,function(){if(S.replayMode){$(".settings-start").fadeIn(500),$(".settings-navigate").hide(),$(".share-container").hide(),$(".wrapper-top").css("height","5%"),$(".wrapper-bottom").css("height","95%");var e='<p class="replay-title">Replay from '+S.settings.date+"</p>";$(".wrapper-top").append(e),$(".button-start").text("Watch Dash Replay")}else S.codeDash&&(f(),$(".settings-shuffler").fadeOut(500,function(){$(".settings-code").fadeIn(500)}),$(".shufflercode-option").removeClass("selected"),$(".shufflercode-code").addClass("selected")),$(".settings-1").fadeIn(500)}),w=$(".select-number"),W=$(".yards-min"),I=$(".yards-max"),k=$(".seconds-min"),O=$(".seconds-max"),H=$(".range-speed"),w.removeClass("selected"),W.removeClass("selected"),I.removeClass("selected"),k.removeClass("selected"),O.removeClass("selected"),H.removeClass("selected"),$.each(w,function(){$(this).text()==S.settings.teams&&$(this).addClass("selected")}),$.each(W,function(){$(this).text()==S.settings.range.minY&&$(this).addClass("selected")}),$.each(I,function(){$(this).text()==S.settings.range.maxY&&$(this).addClass("selected")}),$.each(k,function(){$(this).text()==S.settings.range.minS&&$(this).addClass("selected")}),$.each(O,function(){$(this).text()==S.settings.range.maxS&&$(this).addClass("selected")}),$.each(H,function(){$(this).text()==S.settings.range.speed&&$(this).addClass("selected")}),h(),s(),g(),a(),o(),-1==$.inArray(parseInt(S.settings.teams),[6,8,10,12,14,16,18,20])&&n(!1),$(".select-number").on("click",function(){$(".select-number").removeClass("selected"),$(this).addClass("selected"),S.settings.teams=$(this).text(),t(),h(),g(),m(),s()}),$(".yards-min").on("click",function(){$(".yards-min").removeClass("selected"),$(this).addClass("selected"),S.settings.range.minY=$(this).text()}),$(".yards-max").on("click",function(){$(".yards-max").removeClass("selected"),$(this).addClass("selected"),S.settings.range.maxY=$(this).text()}),$(".seconds-min").on("click",function(){$(".seconds-min").removeClass("selected"),$(this).addClass("selected"),S.settings.range.minS=$(this).text()}),$(".seconds-max").on("click",function(){$(".seconds-max").removeClass("selected"),$(this).addClass("selected"),S.settings.range.maxS=$(this).text()}),$(".range-speed").on("click",function(){$(".range-speed").removeClass("selected"),$(this).addClass("selected"),S.settings.range.speed=$(this).text()}),$(".button-random").on("click",function(){b()}),$(".shufflercode-option").on("click",function(){$(".shufflercode-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("shufflercode-code")?(S.codeDash=!0,f(),$(".settings-shuffler").fadeOut(500,function(){$(".settings-code").fadeIn(500)})):(S.codeDash=!1,f(),$(".settings-code").fadeOut(500,function(){$(".settings-shuffler").fadeIn(500)}))}),$(".imgswitch-option").on("click",function(){$(".imgswitch-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("imgswitch-on")?S.imgOn=!0:S.imgOn=!1,o()}),$(".teamswitch-option").on("click",function(){$(".teamswitch-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("teamswitch-on")?n(!1):n(!0)}),D=1,function e(){$(".settings-next").on("click",function(){$(".settings-next").off("click"),$(".settings-back").off("click"),$(".settings-"+D).fadeOut(500,function(){D++,$(".settings-"+D).fadeIn(500,function(){e()})})}),$(".settings-back").on("click",function(){$(".settings-next").off("click"),$(".settings-back").off("click"),$(".settings-"+D).fadeOut(500,function(){D--,$(".settings-"+D).fadeIn(500,function(){e()})})}),$(".settings-code-fill").on("click",function(){v()}),$(".settings-compile").on("click",function(){$(".settings-url").val(y())})}(),$(".settings-link").on("click",function(){$(this).select()}),$(".copy-url").on("click",function(e){var t=document.querySelector(".settings-url");t.focus(),t.select(),document.execCommand("copy");var n=$(this);n.find("i").text("done"),t1=setTimeout(function(){n.find("i").text("filter_none")},4e3)}),$(".copy-replay").on("click",function(e){var t=document.querySelector(".settings-replay");t.focus(),t.select(),document.execCommand("copy");var n=$(this);n.find("i").text("done"),t1=setTimeout(function(){n.find("i").text("filter_none")},4e3)}),$(".button-start").one("click",function(){$(this).prop("disabled",!0),$(".button-random").prop("disabled",!0),S.codeDash||$.each(S.settings.player,function(e,t){S.settings.player[e].code=""}),$(".settings-start").fadeOut(500,function(){$(".settings-goodluck").fadeIn(500,function(){$(".settings-goodluck").fadeOut(500),$(".settings-box").fadeOut(500,function(){$(".countdown-box").fadeIn(500,function(){$(".countdown-3").fadeIn(500,function(){$(".countdown-3").fadeOut(500,function(){$(".countdown-2").fadeIn(500,function(){$(".countdown-2").fadeOut(500,function(){$(".countdown-1").fadeIn(500,function(){$(".countdown-1").fadeOut(500,function(){$(".countdown-box").fadeOut(500,function(){R($(".p-container"))})})})})})})})})})})})}),$(window).on("resize",function(){i()})})}}),$.fn.extend({toolTip:function(e){var u={pointerWidth:6,pointerHeight:4,backgroundColor:"rgb(0,0,0)",fontSize:"10px",fontColor:"#fff",fontFamily:"Verdana,Tahoma,sans-serif",textAlign:"center",boxPadding:5,boxMargin:0,maxWidth:200,fadeTime:200,boxClassName:"tt-box",pointerClassName:"tt-pointer",roundedCorners:!0};e=$.extend(u,e);return this.each(function(){var s=$(this);if(s.attr("title")&&""!=s.attr("title")){var a,o,r,d,c,l,p=s.attr("title");s.removeAttr("title");s.on({mouseenter:function(){var e;if(borderRadius=u.roundedCorners?5:0,$("<span/>",{class:u.boxClassName,html:p,css:{"font-size":u.fontSize,"background-color":u.backgroundColor,color:u.fontColor,position:"absolute","z-index":"2000",padding:u.boxPadding+"px",margin:u.boxMargin+"px","font-family":u.fontFamily,"max-width":u.maxWidth+"px","min-width":2*u.pointerWidth+"px","min-height":2*u.pointerWidth+"px","border-radius":borderRadius+"px","text-align":u.textAlign}}).prependTo("body"),$("<div/>",{class:u.pointerClassName,css:{position:"absolute"}}).prependTo("."+u.boxClassName),a=$("."+u.boxClassName),o=$("."+u.pointerClassName),dim={pos:s.offset(),addW:s.outerWidth(!0),addH:s.outerHeight(!0),hWidth:document.documentElement.clientWidth,boxWidth:a.outerWidth(!0),boxHeight:a.outerHeight(!0),boxWidthMin:a.width()},(e=dim).pos.top-e.boxHeight<=0&&(r=!0),e.pos.left<=e.hWidth-e.hWidth&&(d=!0),e.pos.left+e.addW+1>=e.hWidth&&(c=!0),e.addW<=2*u.pointerWidth&&(l=!0),r)var t=dim.pos.top+dim.addH+u.pointerHeight,n={"border-bottom":u.pointerHeight+"px solid "+u.backgroundColor,"border-top":"0","border-left":u.pointerWidth+"px solid transparent","border-right":u.pointerWidth+"px solid transparent",top:"-"+u.pointerHeight+"px",bottom:"auto",left:"auto",right:"auto"};else t=dim.pos.top-dim.boxHeight-u.pointerHeight,n={"border-bottom":"0","border-top":u.pointerHeight+"px solid "+u.backgroundColor,"border-left":u.pointerWidth+"px solid transparent","border-right":u.pointerWidth+"px solid transparent",top:"auto",bottom:"-"+u.pointerHeight+"px",left:"auto",right:"auto"};if(d)if(l){t=dim.pos.top-dim.boxHeight/2+dim.addH/2;var i=dim.pos.left+dim.addW+u.pointerHeight;n={"border-bottom":u.pointerWidth+"px solid transparent","border-top":u.pointerWidth+"px solid transparent","border-left":"0","border-right":u.pointerHeight+"px solid "+u.backgroundColor,top:dim.boxHeight/2-u.pointerWidth,bottom:"auto",left:"-"+u.pointerHeight+"px",right:"auto"}}else{i=dim.hWidth-dim.hWidth;n.left=dim.addW/2-u.pointerWidth+"px",n.right="auto"}else if(c)if(l)t=dim.pos.top-dim.boxHeight/2+dim.addH/2,i=dim.pos.left-dim.boxWidth-u.pointerHeight,n={"border-bottom":u.pointerWidth+"px solid transparent","border-top":u.pointerWidth+"px solid transparent","border-left":u.pointerHeight+"px solid "+u.backgroundColor,"border-right":"0",top:dim.boxHeight/2-u.pointerWidth,bottom:"auto",left:"auto",right:"-"+u.pointerHeight+"px"};else{i=dim.pos.left+dim.addW-dim.boxWidth;n.left="auto",n.right=dim.addW/2-u.pointerWidth+"px"}else{i=dim.pos.left+dim.addW/2-dim.boxWidth/2;n.left=dim.boxWidth/2-u.pointerWidth+"px",n.right="auto"}a.css({top:t+"px",left:i+"px",width:dim.boxWidthMin+"px"}),o.css(n),a.stop(!0,!0).fadeOut(0).fadeIn(u.fadeTime)},mouseleave:function(){a.remove(),a.stop(!0,!0).fadeIn(0).fadeOut(u.fadeTime)}})}})}});
