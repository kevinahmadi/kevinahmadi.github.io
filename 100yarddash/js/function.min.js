$(document).ready(function(){$(".dash-wrapper").hundredYardDash(),$(".tooltip").toolTip()}),$.fn.extend({hundredYardDash:function(e){var S={settings:"",shuffles:0,teamsDefault:12,rangeDefault:"1,10,2,7,Normal",defaultImg:"images/sprites/player.png",totalDashWidth:100,place:1,finalPlaceOrder:[],replayRecord:[],replayMode:!1,dashing:!1,dashOver:!1,codeDash:!1,imgOn:!1,code:[],turn:[]};e=$.extend(S,e);return this.each(function(e){var v=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)+3);return t=encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},l=function(){if(-1<window.location.href.indexOf("?")){for(var e,t,n=[],i=(t=function(e){for(var t="",n=decodeURIComponent(e),i=0;i<n.length;i++)t+=String.fromCharCode(n.charCodeAt(i)-3);return t}(t=window.location.href.split("?")[1])).slice(t.indexOf("?")+1).split("&"),a=0;a<i.length;a++)e=i[a].split("="),n.push(e[0]),n[e[0]]=e[1];return n}},t=function(){$(".p-hold").html("").animate({opacity:0},200,function(){for(var e=0,t=100/S.settings.teams;e<=S.settings.teams-1;){void 0!==S.settings.player[e]&&null!==S.settings.player[e]||(S.settings.player[e]={name:""});var n='<div class="p-container" style="height:'+t+'%;"><div class="p-bar-outside"><div class="p-bar player'+e+'" data-player="'+e+'" style="background-image:url(\'images/sprites/player.png\');"><div class="p-name p-name'+e+'"></div></div></div><div class="p-place-container"><div class="p-place"></div></div></div>';$(".p-hold").append(n),e++}S.settings.player.length>S.settings.teams&&S.settings.player.splice(S.settings.teams)}).animate({opacity:0},100,function(){n(),p(),o(),s()}).animate({opacity:1},500)},n=function(){var n=$(".p-bar").css("height");$(function(){if($(".p-bar").css("width",n),!S.dashing){var e=$(".field-start").width(),t=e/$(".p-container").width()*($(".p-bar").width()/e)*100;S.dashOver||$(".p-bar").css("left",-t+"%")}})},a=function(){$.each(S.settings.player,function(e,t){$(".team"+(e+1)).val(t.name)})},i=function(){$.each($(".input-img"),function(t,e){$(this).on("change",function(){var e=$(this).val();S.settings.player[t].img=e,o()})})},s=function(){S.imgOn?($(".input-img-wrapper").show(),$(".imgswitch-option").removeClass("selected"),$(".imgswitch-on").addClass("selected")):($(".input-img-wrapper").hide(),$(".imgswitch-option").removeClass("selected"),$(".imgswitch-off").addClass("selected")),o()},o=function(){var i=[];$.each($(".p-bar"),function(n,e){if(S.imgOn)if(""===S.settings.player[n].img||null===S.settings.player[n].img||void 0===S.settings.player[n].img||"undefined"===S.settings.player[n].img){t=S.defaultImg;c(t,n)}else if(r(S.settings.player[n].img))d(S.settings.player[n].img).then(function(e){if(i[n]=e,i[n]){var t=S.settings.player[n].img;c(t,n)}},function(e){var t=S.defaultImg;c(t,n)});else{t=S.defaultImg;c(t,n)}else{var t=S.defaultImg;c(t,n)}})},r=function(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)},d=function(s,o){return new Promise(function(e,t){var n,i=o||5e3,a=new Image;a.onerror=a.onabort=function(){clearTimeout(n),t(!1)},a.onload=function(){clearTimeout(n),e(!0)},n=setTimeout(function(){a.src="//!!!!/test.jpg",t(!1)},i),a.src=s})},c=function(e,t){$(".player"+t).css({"background-image":"url('"+e+"')"}),$(".playerimg"+t).val(S.settings.player[t].img)},p=function(){$.each(S.settings.player,function(e,t){$(".p-name"+e).text(S.settings.player[e].name)})},u=function(){S.codeDash?($(".range-toggle").addClass("unavailable"),$(".range-toggle").find(".range-num").addClass("unavailable")):($(".range-toggle").removeClass("unavailable"),$(".range-toggle").find(".range-num").removeClass("unavailable"))},f=function(){$(".teamsinput-container").html("");for(var e=1;e<=S.settings.teams;){var t='<div class="input-container"><input class="input-team team'+e+'" placeholder="'+e+'" /><div class="input-img-wrapper"><i class="material-icons mi-rarr">subdirectory_arrow_right</i><input class="input-img playerimg'+(e-1)+'" placeholder="direct img link" /></div></div>';$(".teamsinput-container").append(t),e++}$.each($(".input-team"),function(t,e){$(this).on("change",function(){var e=$(this).val();$(".p-name"+t).text(e),S.settings.player[t].name=e,h()})})},g=function(){$(".code-container").html("");for(var e=1;e<=S.settings.teams;){var t='<div class="code-line"><div class="code-player-name c-name'+(e-1)+'"></div><input type="text" class="input-code code'+(e-1)+'" /></div>';$(".code-container").append(t),e++,h(),$.each($(".input-code"),function(t,e){$(this).on("change",function(){var e=(e=(e=$(this).val()).replace(/\s/g,"")).substring(0,20);S.settings.player[t].code=e})})}},h=function(){$.each(S.settings.player,function(e,t){$(".c-name"+e).text(t.name),$(".code"+e).val(t.code)})},m=function(){S.codeDash&&$.each($(".input-code"),function(e,t){if(""===$(this).val()){var n=x();$(this).val(n),S.settings.player[e].code=n}}),h()},x=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<15;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},b=function(){S.shuffles++,$(".total-shuffles").text(S.shuffles);for(var e,t,n=S.settings.player,i=n.length;0!==i;)t=Math.floor(Math.random()*i),e=n[i-=1],n[i]=n[t],n[t]=e;S.settings.player=n,p(),h(),a(),o()},y=function(){var n=[],e=window.location.href.split("?")[0];$.each(S.settings.player,function(e,t){n.push(encodeURIComponent(t.name))});var t="teams="+S.settings.teams;if(t+="&names="+n.join(","),t+="&range="+S.settings.range.minY+","+S.settings.range.maxY+","+S.settings.range.minS+","+S.settings.range.maxS+","+S.settings.range.speed,S.imgOn){var i=[];$.each(S.settings.player,function(e,t){i.push(encodeURIComponent(t.img))}),t+="&img="+i.join(",")}if(S.codeDash){var a=[];$.each(S.settings.player,function(e,t){a.push(encodeURIComponent(t.code))}),t+="&code="+a.join(",")}return t=e+"?"+(t=v(t))},C=function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"};String.prototype.hexEncode=function(){var e,t="";for(e=0;e<this.length;e++)t+=this[e].charCodeAt(0);return t};var W,w,I,k,O,H,R,D=function(e){S.dashing=!0;var u=parseInt(S.settings.range.minY),f=parseInt(S.settings.range.maxY)+1-parseInt(S.settings.range.minY),g=1e3*parseInt(S.settings.range.minS),h=1e3*(parseInt(S.settings.range.maxS)-parseInt(S.settings.range.minS)),m=S.settings.range.speed;$.each(e,function(e,t){var n=$(this),i=!1,a=n.find(".p-bar").data("player"),s=n.width(),o=n.find(".p-bar").css("left");o=parseFloat(o);if(currentPercent=o/s*100,S.replayMode){void 0!==S.turn[a]&&null!==S.turn[a]||(S.turn[a]=0);var r=parseInt(S.settings.replay[a].yards[S.turn[a]]),d=parseInt(S.settings.replay[a].time[S.turn[a]]);S.turn[a]++;var c=S.settings.replay[a].yards.length;S.turn[a]>c&&n.find(".p-bar").css({left:S.totalDashWidth+"%"})}else{if(S.codeDash){void 0!==S.turn[a]&&null!==S.turn[a]||(S.turn[a]=0,S.code[a]=S.settings.player[a].code);var l=function(e){null!=e&&""!==e||(e=(e="blank").toString()),e.length<=4&&(e=e+e+e+e+e);var t=(t=(t=(t=e.hexEncode()).replace(/\D/g,"")).replace(/[0]/g,"")).match(/.{5}/g),a=[],s=[];return $.each(t,function(e,t){var n=t.substring(0,1),i=t.substring(1);a[e]=n,s[e]=i}),{yards:a,time:s}}(S.code[a]);void 0!==l.yards[S.turn[a]]&&null!==l.yards[S.turn[a]]||(S.code[a]=function(e){for(var t="",n=encodeURIComponent(e).split("").reverse().join(""),i=0;i<n.length;i++)t+=String.fromCharCode(n.charCodeAt(i)+1);return t+=e}(S.code[a]),S.turn[a]=0);r=parseInt(l.yards[S.turn[a]]),d=parseInt(l.time[S.turn[a]]);S.turn[a]++}else r=randomNum=Math.floor(Math.random()*f)+u,d=Math.floor(Math.random()*h)+g;void 0===S.replayRecord[a]&&(S.replayRecord[a]={yards:"",time:"",place:""}),S.replayRecord[a].yards+=r+",",S.replayRecord[a].time+=d+","}"Fast"===m&&(r*=2),"Faster"===m&&(r*=2,d/=2),"Fastest"===m&&(r*=3,d/=3);var p=currentPercent+r;n.find(".p-bar").animate({left:p+"%"},{duration:d,easing:"swing",progress:function(){cW=n.width(),bW=n.find(".p-bar").css("left"),bW=parseFloat(bW),cP=bW/cW*100,cP>=S.totalDashWidth&&(i=!0,n.find(".p-bar").stop(!1,!0))},complete:function(){var e;i?(n.find(".p-bar").css({left:S.totalDashWidth+"%"}),S.replayMode?S.place=S.settings.replay[a].place:(S.replayRecord[a].place=S.place,S.replayRecord[a].yards=S.replayRecord[a].yards.slice(0,-1),S.replayRecord[a].time=S.replayRecord[a].time.slice(0,-1)),S.finalPlaceOrder[S.place-1]={place:S.place,name:S.settings.player[a].name},n.find(".p-place").text(C(S.place)),"1"==S.place?n.find(".p-place").addClass("gold"):"2"==S.place?n.find(".p-place").addClass("silver"):"3"==S.place?n.find(".p-place").addClass("bronze"):n.find(".p-place").addClass("black-outline"),S.finalPlaceOrder.length==S.settings.teams?(S.dashing=!1,S.dashOver=!0,e=S.finalPlaceOrder,$.each(e,function(e,t){var n='<div class="place-order"><div class="place-number">'+C(t.place)+'</div><div class="place-name">'+t.name+"</div></div>";$(".placements").append(n)}),$(".settings-replay").val(function(){var e=y(),t=$.now(),n=[];$.each(S.replayRecord,function(e,t){n[e]=t.place+":"+t.yards+":"+t.time});n=n.join("^");return e+v("&date="+t+"&replay="+n)}()),$(".settings-box").delay(500).fadeIn(500),$(".settings-share").show()):S.place++):D(n)}})})};S.settings=function(){var e=l();void 0===e&&(e=[]);var t=e.teams||S.teamsDefault,n={minY:(n=(n=e.range||S.rangeDefault).split(","))[0],maxY:n[1],minS:n[2],maxS:n[3],speed:n[4]},i=e.date,a=e.replay,s=(s=e.names||"").split(","),o=[],r=[];$.each(s,function(e,t){o.push({name:decodeURIComponent(t),code:"",img:""})}),void 0!==e.replay&&(S.replayMode=!0,a=a.split("^"),$.each(a,function(e,t){var n=t.split(":"),i=n[1].split(","),a=n[2].split(",");r[e]={place:n[0],yards:i,time:a}}),i=(i=new Date(parseInt(i))).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"}));if(void 0!==e.code){S.codeDash=!0;var d=e.code.split(",");$.each(d,function(e,t){o[e].code=decodeURIComponent(t)}),u()}if(void 0!==e.img){S.imgOn=!0;var c=e.img.split(",");$.each(c,function(e,t){o[e].img=decodeURIComponent(t)})}else S.imgOn=!1;return{teams:t,player:o,range:n,date:i,replay:r}}(),t(),$(".settings-box").fadeIn(500,function(){if(S.replayMode){$(".settings-start").fadeIn(500),$(".settings-navigate").hide(),$(".share-container").hide(),$(".wrapper-top").css("height","5%"),$(".wrapper-bottom").css("height","95%");var e='<p class="replay-title">Replay from '+S.settings.date+"</p>";$(".wrapper-top").append(e),$(".button-start").text("Watch Dash Replay")}else S.codeDash&&(u(),$(".settings-shuffler").fadeOut(500,function(){$(".settings-code").fadeIn(500)}),$(".shufflercode-option").removeClass("selected"),$(".shufflercode-code").addClass("selected")),$(".settings-1").fadeIn(500)}),W=$(".select-number"),w=$(".yards-min"),I=$(".yards-max"),k=$(".seconds-min"),O=$(".seconds-max"),H=$(".range-speed"),W.removeClass("selected"),w.removeClass("selected"),I.removeClass("selected"),k.removeClass("selected"),O.removeClass("selected"),H.removeClass("selected"),$.each(W,function(){$(this).text()==S.settings.teams&&$(this).addClass("selected")}),$.each(w,function(){$(this).text()==S.settings.range.minY&&$(this).addClass("selected")}),$.each(I,function(){$(this).text()==S.settings.range.maxY&&$(this).addClass("selected")}),$.each(k,function(){$(this).text()==S.settings.range.minS&&$(this).addClass("selected")}),$.each(O,function(){$(this).text()==S.settings.range.maxS&&$(this).addClass("selected")}),$.each(H,function(){$(this).text()==S.settings.range.speed&&$(this).addClass("selected")}),f(),a(),g(),i(),s(),$(".select-number").on("click",function(){$(".select-number").removeClass("selected"),$(this).addClass("selected"),S.settings.teams=$(this).text(),t(),f(),g(),h(),a()}),$(".yards-min").on("click",function(){$(".yards-min").removeClass("selected"),$(this).addClass("selected"),S.settings.range.minY=$(this).text()}),$(".yards-max").on("click",function(){$(".yards-max").removeClass("selected"),$(this).addClass("selected"),S.settings.range.maxY=$(this).text()}),$(".seconds-min").on("click",function(){$(".seconds-min").removeClass("selected"),$(this).addClass("selected"),S.settings.range.minS=$(this).text()}),$(".seconds-max").on("click",function(){$(".seconds-max").removeClass("selected"),$(this).addClass("selected"),S.settings.range.maxS=$(this).text()}),$(".range-speed").on("click",function(){$(".range-speed").removeClass("selected"),$(this).addClass("selected"),S.settings.range.speed=$(this).text()}),$(".button-random").on("click",function(){b()}),$(".shufflercode-option").on("click",function(){$(".shufflercode-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("shufflercode-code")?(S.codeDash=!0,u(),$(".settings-shuffler").fadeOut(500,function(){$(".settings-code").fadeIn(500)})):(S.codeDash=!1,u(),$(".settings-code").fadeOut(500,function(){$(".settings-shuffler").fadeIn(500)}))}),$(".imgswitch-option").on("click",function(){$(".imgswitch-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("imgswitch-on")?S.imgOn=!0:S.imgOn=!1,s()}),R=1,function e(){$(".settings-next").on("click",function(){$(".settings-next").off("click"),$(".settings-back").off("click"),$(".settings-"+R).fadeOut(500,function(){R++,$(".settings-"+R).fadeIn(500,function(){e()})})}),$(".settings-back").on("click",function(){$(".settings-next").off("click"),$(".settings-back").off("click"),$(".settings-"+R).fadeOut(500,function(){R--,$(".settings-"+R).fadeIn(500,function(){e()})})}),$(".settings-code-fill").on("click",function(){m()}),$(".settings-compile").on("click",function(){$(".settings-url").val(y())})}(),$(".settings-link").on("click",function(){$(this).select()}),$(".copy-url").on("click",function(e){var t=document.querySelector(".settings-url");t.focus(),t.select(),document.execCommand("copy");var n=$(this);n.find("i").text("done"),t1=setTimeout(function(){n.find("i").text("filter_none")},4e3)}),$(".copy-replay").on("click",function(e){var t=document.querySelector(".settings-replay");t.focus(),t.select(),document.execCommand("copy");var n=$(this);n.find("i").text("done"),t1=setTimeout(function(){n.find("i").text("filter_none")},4e3)}),$(".button-start").one("click",function(){$(this).prop("disabled",!0),$(".button-random").prop("disabled",!0),S.codeDash||$.each(S.settings.player,function(e,t){S.settings.player[e].code=""}),$(".settings-start").fadeOut(500,function(){$(".settings-goodluck").fadeIn(500,function(){$(".settings-goodluck").fadeOut(500),$(".settings-box").fadeOut(500,function(){$(".countdown-box").fadeIn(500,function(){$(".countdown-3").fadeIn(500,function(){$(".countdown-3").fadeOut(500,function(){$(".countdown-2").fadeIn(500,function(){$(".countdown-2").fadeOut(500,function(){$(".countdown-1").fadeIn(500,function(){$(".countdown-1").fadeOut(500,function(){$(".countdown-box").fadeOut(500,function(){D($(".p-container"))})})})})})})})})})})})}),$(window).on("resize",function(){n()})})}}),$.fn.extend({toolTip:function(e){var u={pointerWidth:6,pointerHeight:4,backgroundColor:"rgb(0,0,0)",fontSize:"10px",fontColor:"#fff",fontFamily:"Verdana,Tahoma,sans-serif",textAlign:"center",boxPadding:5,boxMargin:0,maxWidth:200,fadeTime:200,boxClassName:"tt-box",pointerClassName:"tt-pointer",roundedCorners:!0};e=$.extend(u,e);return this.each(function(){var a=$(this);if(a.attr("title")&&""!=a.attr("title")){var s,o,r,d,c,l,p=a.attr("title");a.removeAttr("title");a.on({mouseenter:function(){var e;if(borderRadius=u.roundedCorners?5:0,$("<span/>",{class:u.boxClassName,html:p,css:{"font-size":u.fontSize,"background-color":u.backgroundColor,color:u.fontColor,position:"absolute","z-index":"2000",padding:u.boxPadding+"px",margin:u.boxMargin+"px","font-family":u.fontFamily,"max-width":u.maxWidth+"px","min-width":2*u.pointerWidth+"px","min-height":2*u.pointerWidth+"px","border-radius":borderRadius+"px","text-align":u.textAlign}}).prependTo("body"),$("<div/>",{class:u.pointerClassName,css:{position:"absolute"}}).prependTo("."+u.boxClassName),s=$("."+u.boxClassName),o=$("."+u.pointerClassName),dim={pos:a.offset(),addW:a.outerWidth(!0),addH:a.outerHeight(!0),hWidth:document.documentElement.clientWidth,boxWidth:s.outerWidth(!0),boxHeight:s.outerHeight(!0),boxWidthMin:s.width()},(e=dim).pos.top-e.boxHeight<=0&&(r=!0),e.pos.left<=e.hWidth-e.hWidth&&(d=!0),e.pos.left+e.addW+1>=e.hWidth&&(c=!0),e.addW<=2*u.pointerWidth&&(l=!0),r)var t=dim.pos.top+dim.addH+u.pointerHeight,n={"border-bottom":u.pointerHeight+"px solid "+u.backgroundColor,"border-top":"0","border-left":u.pointerWidth+"px solid transparent","border-right":u.pointerWidth+"px solid transparent",top:"-"+u.pointerHeight+"px",bottom:"auto",left:"auto",right:"auto"};else t=dim.pos.top-dim.boxHeight-u.pointerHeight,n={"border-bottom":"0","border-top":u.pointerHeight+"px solid "+u.backgroundColor,"border-left":u.pointerWidth+"px solid transparent","border-right":u.pointerWidth+"px solid transparent",top:"auto",bottom:"-"+u.pointerHeight+"px",left:"auto",right:"auto"};if(d)if(l){t=dim.pos.top-dim.boxHeight/2+dim.addH/2;var i=dim.pos.left+dim.addW+u.pointerHeight;n={"border-bottom":u.pointerWidth+"px solid transparent","border-top":u.pointerWidth+"px solid transparent","border-left":"0","border-right":u.pointerHeight+"px solid "+u.backgroundColor,top:dim.boxHeight/2-u.pointerWidth,bottom:"auto",left:"-"+u.pointerHeight+"px",right:"auto"}}else{i=dim.hWidth-dim.hWidth;n.left=dim.addW/2-u.pointerWidth+"px",n.right="auto"}else if(c)if(l)t=dim.pos.top-dim.boxHeight/2+dim.addH/2,i=dim.pos.left-dim.boxWidth-u.pointerHeight,n={"border-bottom":u.pointerWidth+"px solid transparent","border-top":u.pointerWidth+"px solid transparent","border-left":u.pointerHeight+"px solid "+u.backgroundColor,"border-right":"0",top:dim.boxHeight/2-u.pointerWidth,bottom:"auto",left:"auto",right:"-"+u.pointerHeight+"px"};else{i=dim.pos.left+dim.addW-dim.boxWidth;n.left="auto",n.right=dim.addW/2-u.pointerWidth+"px"}else{i=dim.pos.left+dim.addW/2-dim.boxWidth/2;n.left=dim.boxWidth/2-u.pointerWidth+"px",n.right="auto"}s.css({top:t+"px",left:i+"px",width:dim.boxWidthMin+"px"}),o.css(n),s.stop(!0,!0).fadeOut(0).fadeIn(u.fadeTime)},mouseleave:function(){s.remove(),s.stop(!0,!0).fadeIn(0).fadeOut(u.fadeTime)}})}})}});
